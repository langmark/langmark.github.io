(function(){this.Hisogram=function(){function t(t,e){var n,r;null==e&&(e=""),this.options={title:e,width:"100%",height:400,chartArea:{width:"90%",height:"80%"},legend:{position:"none"},backgroundColor:"#eee",animation:{duration:500},tooltip:{isHtml:!0},logScale:!1},this.views=[];for(n in t)r=t[n],this.views[n]=r}return t.prototype.options=null,t.prototype.chart=null,t.prototype.views=null,t.prototype.currentView=null,t.prototype.setContainer=function(t){var e,n,r;return this.currentView=0,e=$("<div>"),r=$("<button>").addClass("btn btn-success btn-xs").text("Hide slow"),r.click(function(t){return function(){return r.toggleClass("btn-success").toggleClass("btn-primary"),0===t.currentView?(r.text("Show slow"),t.draw(1)):(r.text("Hide slow"),t.draw(0))}}(this)),n=$("<button>").addClass("btn btn-success btn-xs").text("Log scale"),n.click(function(t){return function(){return n.toggleClass("btn-success").toggleClass("btn-primary"),t.options.logScale?(n.text("Linear scale"),t.options.logScale=0,t.draw(t.currentView)):(n.text("Log scale"),t.options.logScale=1,t.draw(t.currentView))}}(this)),t.append(r),t.append(n),t.append(e),this.chart=new google.visualization.ColumnChart(e[0])},t.prototype.draw=function(t){return null==t&&(t=0),this.chart.draw(this.views[t],this.options),this.currentView=t},t}(),this.Lang=function(){function t(t){this.times=t}return t.prototype.times=[],t.prototype.getMin=function(){var t,e,n,r,o;for(t=1/0,o=this.times,n=0,r=o.length;r>n;n++)e=o[n],t=Math.min(t,e.time);return t},t.prototype.getAverage=function(){var t,e,n,r,o;for(o=0,r=this.times,e=0,n=r.length;n>e;e++)t=r[e],o+=t.time;return o/this.times.length},t.prototype.getRow=function(t,e){var n,r,o,i,a,s;for(a=(e-this.times.length)/2|0,i=[t],n=r=0,o=e;o>=0?o>r:r>o;n=o>=0?++r:--r)a>n||n>=a+this.times.length?i.push([0,""]):(s="<div class='column-tooltip'> <h1>"+this.times[n-a].name+"</h1> <dl> <dt>Version</dt> <dd>"+this.times[n-a].version.replace("\n","<br>")+"</dd> <dt>Time</dt> <dd>"+this.times[n-a].time.toFixed(3)+"</dd> </dl>",i.push([this.times[n-a].time,s]));return i},t}(),this.Test=function(){function t(t,e){var n,r;this.name=t;for(n in e)r=e[n],r.length>0&&(this.langs[n]=new Lang(r));this.chart=this.getHistogram()}return t.prototype.name="",t.prototype.langs={},t.prototype.chart=null,t.prototype.getAverage=function(){var t,e,n,r,o;r=0,e=0,n=this.langs;for(t in n)o=n[t],r+=o.getAverage(),e++;return r/e},t.prototype.getHistogram=function(){var t;return t=[this.getChartData(!1),this.getChartData(!0)],new Hisogram(t)},t.prototype.getColsNumber=function(){var t,e,n,r;e=0,n=this.langs;for(t in n)r=n[t],e=Math.max(e,r.times.length);return e},t.prototype.getChartData=function(t){var e,n,r,o,i,a,s,l,u,h,p,c,d;for(null==t&&(t=!1),i=new google.visualization.DataTable,r=this.getColsNumber(),i.addColumn("string","Language"),a=s=0,h=r;h>=0?h>s:s>h;a=h>=0?++s:--s)i.addColumn("number",""),i.addColumn({type:"string",role:"tooltip",p:{html:!0}});t&&(n=this.getAverage()),o=[],p=this.langs;for(l in p)d=p[l],(t===!1||d.getAverage()<n)&&o.push(d.getRow(l,r));o=o.sort(function(t,e){var n,r,o,i,s,l,u,h;for(u=n=h=r=0,a=o=1,s=t.length;s>=1?s>o:o>s;a=s>=1?++o:--o)t[a][0]&&(u+=t[a][0],n++);for(a=i=1,l=e.length;l>=1?l>i:i>l;a=l>=1?++i:--i)e[a][0]&&(h+=e[a][0],r++);return u/n-h/r}),u=[];for(e in o)c=o[e],u.push([].concat.apply([],c));return i.addRows(u),i},t}(),this.Table=function(){function t(t,e){this.lang=t,this.buildData(e)}return t.prototype.lang=null,t.prototype.data=null,t.prototype.buildData=function(t){var e,n,r,o,i,a;this.data={},i=[];for(a in t)o=t[a],r=o[this.lang],r&&i.push(function(){var t,o,i;i=[];for(n in r)e=r[n],null==(t=this.data)[o=e.name]&&(t[o]={}),i.push(this.data[e.name][a]=e.time);return i}.call(this));return i},t.prototype.getTests=function(){var t,e,n,r,o;n={},e=this.data;for(t in e){o=e[t];for(r in o)n[r]=1}return Object.keys(n).sort()},t}(),this.Analyzer=function(){function t(t,e){this.filename=t,this.name=e,this.analyzed=!1,this.tests={},this.tables={}}return t.prototype.filename=null,t.prototype.name=null,t.prototype.data=null,t.prototype.analyzed=null,t.prototype.tests=null,t.prototype.tables=null,t.prototype.loadData=function(t,e,n){return null==e&&(e=!0),this.analyzed&&n?n():t.get(this.filename).then(function(t){return function(r){return t.data=r.data,e&&t.analyze(),n?n():void 0}}(this))},t.prototype.analyze=function(){var t,e,n;if(!this.analyzed){console.log("Analysis of "+this.filename+" started"),e=this.data;for(n in e)t=e[n],this.tests[n]=new Test(n,t);return this.analyzed=!0}},t.prototype.draw=function(){return this.drawChart(),this.drawTable()},t.prototype.drawChart=function(){var t,e,n,r,o,i;$("#container").empty(),r=Object.keys(this.tests).sort(),o=[];for(t in r)i=r[t],n=this.tests[i],e=$("<div>").attr("id",i),e.append(this.getTitle(i)),$("#container").append(e),n.chart.setContainer(e),n.chart.draw(0),o.push($("#container").append("<br>"));return o},t.prototype.drawTable=function(){var t,e,n,r;n=this.getLangs(),r=[];for(t in n)e=n[t],r.push(this.tables[e]=new Table(e,this.data));return r},t.prototype.getLangs=function(){var t,e,n,r,o;r={},n=this.data;for(o in n){e=n[o];for(t in e)r[t]=1}return Object.keys(r).sort()},t.prototype.getTitle=function(t){var e;return e=$('<a href="#">'),e.text(t),e.click(function(e){return function(){return $.ajax({url:"https://raw.githubusercontent.com/langmark/langmark/master/"+t+"/README.md",dataType:"text",success:function(e){return $(".modal-body").html(marked(e)),$(".modal-title").text(t),$("#modal").modal()},error:function(){return $(".modal-body").html("<em>No description available...</em>"),$(".modal-title").text(t),$("#modal").modal()}})}}(this)),$("<h2>").append(e)},t}()}).call(this);